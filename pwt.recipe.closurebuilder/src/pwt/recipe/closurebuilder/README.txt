Closure builder zc.buildout recipe
==================================

  >>> import os.path

  >>> os.mkdir(os.path.join(sample_buildout, 'js'))
  >>> write('js/a.js', '''
  ... goog.provide('pwt.provideA');
  ... 
  ... goog.require('pwt.provideB');
  ... ''')

  >>> write('js/b.js', '''
  ... goog.provide('pwt.provideB');
  ... ''')


roots
-----

  >>> write('buildout.cfg', '''
  ... [buildout]
  ... parts = deps.js
  ...
  ... [deps.js]
  ... recipe = pwt.recipe.closurebuilder:dependency
  ... output = %(dir)s/d1.js
  ... roots = %(dir)s/js
  ... ''' %{'dir': sample_buildout})

  >>> print system(buildout)
  Installing deps.js.
  <BLANKLINE>

  >>> cat('d1.js')
  // This file was autogenerated by buildout[deps.js].
  // Please do not edit.
  goog.addDependency('a.js', ['pwt.provideA'], ['pwt.provideB']);
  goog.addDependency('b.js', ['pwt.provideB'], []);


roots with prefix
-----------------

  >>> write('buildout.cfg', '''
  ... [buildout]
  ... parts = deps.js
  ...
  ... [deps.js]
  ... recipe = pwt.recipe.closurebuilder:dependency
  ... output = %(dir)s/d2.js
  ... root_with_prefix = %(dir)s/js /media
  ... ''' %{'dir': sample_buildout})

  >>> print system(buildout)
  Uninstalling deps.js.
  Installing deps.js.
  <BLANKLINE>

  >>> cat('d2.js')
  // This file was autogenerated by buildout[deps.js].
  // Please do not edit.
  goog.addDependency('/media/a.js', ['pwt.provideA'], ['pwt.provideB']);
  goog.addDependency('/media/b.js', ['pwt.provideB'], []);
